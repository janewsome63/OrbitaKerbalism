@PART[*]:HAS[@MODULE[*Engines*]]:FINAL {
	// Variables
	eng_keroseneRatio = 1.0
	eng_lqdoxRatio = 1.438769231
	eng_octogenRatio = 1.0
	eng_lqdoxMulti = 4.382120947

	// Rocket Engines
	@MODULE[*]:HAS[@PROPELLANT[LiquidFuel],@PROPELLANT[Oxidizer]] {
		!PROPELLANT[LiquidFuel] {}
		!PROPELLANT[Oxidizer] {}
		PROPELLANT
		{
			name = Kerosene
			ratio = #$/eng_keroseneRatio$
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = #$/eng_lqdoxRatio$
		}
	}

	// Jet Engines
	@MODULE[*]:HAS[@PROPELLANT[LiquidFuel],!PROPELLANT[Oxidizer]] {
		!PROPELLANT[LiquidFuel] {}
		PROPELLANT
		{
			name = Kerosene
			ratio = #$/eng_keroseneRatio$
			DrawGauge = True
		}
	}

	// Other Oxidized Engines
	@MODULE[*]:HAS[!PROPELLANT[LiquidFuel],@PROPELLANT[Oxidizer]] {
		eng_lqdoxRatioCalc = #$PROPELLANT[Oxidizer]/ratio$
		@eng_lqdoxRatioCalc *= #$/eng_lqdoxMulti$

		!PROPELLANT[Oxidizer] {}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = #$../eng_lqdoxRatioCalc$
			DrawGauge = True
		}
	}

	// Monopropellant Engines
	@MODULE[*]:HAS[@PROPELLANT[MonoPropellant]] {
		hydrazineRatio = #$PROPELLANT[MonoPropellant]/ratio$
		!PROPELLANT[MonoPropellant] {}
		PROPELLANT
		{
			name = Hydrazine
			ratio = #$../hydrazineRatio$
			DrawGauge = True
		}
	}

	// Solid Rocket Engines
	@MODULE[*]:HAS[@PROPELLANT[SolidFuel]] {
		!PROPELLANT[SolidFuel] {}
		PROPELLANT
		{
			name = Octogen
			ratio = #$/eng_octogenRatio$
			DrawGauge = True
		}
	}
}