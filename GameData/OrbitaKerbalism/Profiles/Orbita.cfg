// ============================================================================
// Orbita Kerbalism Profile
// ============================================================================

Profile {
	name = orbita

	// ===============
	// Resource Alerts
	// ===============
   
	Supply {
		resource = CarbonDioxide
		low_message = #OrbitaLoc_Kerbalism_alert_carbondioxide_low
		empty_message = #OrbitaLoc_Kerbalism_alert_carbondioxide_empty
		refill_message = #OrbitaLoc_Kerbalism_alert_carbondioxide_refilled
	}
	
	Supply {
		resource = ElectricCharge
		on_eva = 33.0
		on_rescue = 10000.0
		low_message = #OrbitaLoc_Kerbalism_alert_battery_low
		empty_message = #OrbitaLoc_Kerbalism_alert_battery_empty
		refill_message = #OrbitaLoc_Kerbalism_alert_battery_refilled
	}
  
	Supply {
		resource = Food
		on_pod = 1.35    // 5 days
		on_rescue = 2.2  // 8 days
		low_message = #OrbitaLoc_Kerbalism_alert_food_low
		empty_message = #OrbitaLoc_Kerbalism_alert_food_empty
		refill_message = #OrbitaLoc_Kerbalism_alert_food_refilled
	}
	
	Supply {
		resource = Nitrogen
		on_rescue = 100.0
		low_message = #OrbitaLoc_Kerbalism_alert_nitrogen_low
		empty_message = #OrbitaLoc_Kerbalism_alert_nitrogen_empty
		refill_message = #OrbitaLoc_Kerbalism_alert_nitrogen_refilled
	}
	
	Supply {
		resource = Oxygen
		on_pod = 187      // 5 days
		on_eva = 12.5     // 2 hrs
		on_rescue = 298   // 8 days
		low_message = #OrbitaLoc_Kerbalism_alert_oxygen_low
		empty_message = #OrbitaLoc_Kerbalism_alert_oxygen_empty
		refill_message = #OrbitaLoc_Kerbalism_alert_oxygen_refilled
	}
	
	Supply {
		resource = Water
		on_pod = 0.7     // 5 days
		on_rescue = 1.1  // 8 days
		low_message = #OrbitaLoc_Kerbalism_alert_water_low
		empty_message = #OrbitaLoc_Kerbalism_alert_water_empty
		refill_message = #OrbitaLoc_Kerbalism_alert_water_refilled
	}

	// ============
	// System Rules
	// ============
	
	Rule {
		name = breathing
		title = #OrbitaLoc_Kerbalism_rules_breathing_name
		input = Oxygen
		output = WasteAtmosphere
		rate = 0.00172379825 // Based on ISS figures of 0.84Kg/day. Kerbals use 1/16 of an astronauts use giving figures of 0.0525Kg/day.
							 // Oxygen to WasteAtmosphere mass difference is calculated internally
		degeneration = 0.0055555 // 3 minutes
		modifier = non_breathable
		individuality = 0.01
		warning_message = #OrbitaLoc_Kerbalism_rules_breathing_warning
		danger_message = #OrbitaLoc_Kerbalism_rules_breathing_danger
		fatal_message = #OrbitaLoc_Kerbalism_rules_breathing_fatal
		relax_message = #OrbitaLoc_Kerbalism_rules_breathing_relax
	}
	
	Rule {
		name = climatization
		title = #OrbitaLoc_Kerbalism_rules_climatization_name
		input = ElectricCharge
		rate = 0.0001 // per-kelvin (temp diff), per m^3 (living space), per-second
		degeneration = 0.00000007 // about 2h at 100k temp diff in 20m^3
		modifier = temperature,volume,per_capita
		warning_message = #OrbitaLoc_Kerbalism_rules_climatization_warning
		danger_message = #OrbitaLoc_Kerbalism_rules_climatization_danger
		fatal_message = #OrbitaLoc_Kerbalism_rules_climatization_fatal
		relax_message = #OrbitaLoc_Kerbalism_rules_climatization_relax
	}
	
	Rule {
		name = co2level
		title = #OrbitaLoc_Kerbalism_rules_co2level_name
		degeneration = 0.0005555 // 30 minutes
		modifier = poisoning
		warning_threshold = 0.23
		warning_message = #OrbitaLoc_Kerbalism_rules_co2level_warning
		danger_message = #OrbitaLoc_Kerbalism_rules_co2level_danger
		fatal_message = #OrbitaLoc_Kerbalism_rules_breathing_fatal
		relax_message = #OrbitaLoc_Kerbalism_rules_breathing_relax
	}
	
	Rule {
		name = drinking
		title = #OrbitaLoc_Kerbalism_rules_drinking_name
		input = Water
		output = WasteWater
		rate = 0.03359375 // Based on ISS figures of 1.62Kg/day drinking and 0.8Kg/day to rehydrate food 3 times/day = 2.42 Kg/day.
						  // Kerbals use 1/16 of an astronauts use and have 2 meals/day giving figures of 0.10125Kg/day drinking
						  // and 0.033125Kg/day to rehydrate food 2 times/day = 0.134375Kg/day.
						  // Water to WasteWater mass difference is calculated internally.
		interval = 5400.0 // 4 drinks per-day
		degeneration = 0.08333 // 12 drinks, 3 days
		individuality = 0.01
		warning_message = #OrbitaLoc_Kerbalism_rules_drinking_warning
		danger_message = #OrbitaLoc_Kerbalism_rules_drinking_danger
		fatal_message = #OrbitaLoc_Kerbalism_rules_drinking_fatal
		relax_message = #OrbitaLoc_Kerbalism_rules_drinking_relax
	}
	
	Rule {
		name = eating
		title = #OrbitaLoc_Kerbalism_rules_eating_name
		input = Food
		output = Waste
		rate = 0.1312141885 // Based on ISS figures of dehydrated food of 0.59Kg/meal 3 times/day = 1.77Kg/day.
							// Kerbals use 1/16 of an astronauts use and have 2 meals/day giving figures of 0.036875Kg/meal = 0.07375Kg/day
							// Food to Waste mass difference is calculated internally
		interval = 10800.0  // 2 meals per-day
		individuality = 0.01
		degeneration = 0.03333 // 30 meals, 15 days
		warning_message = #OrbitaLoc_Kerbalism_rules_eating_warning
		danger_message = #OrbitaLoc_Kerbalism_rules_eating_danger
		fatal_message = #OrbitaLoc_Kerbalism_rules_eating_fatal
		relax_message = #OrbitaLoc_Kerbalism_rules_eating_relax
	}

	Rule {
		name = stress
		title = #OrbitaLoc_Kerbalism_rules_stress_name
		degeneration = 0.00000000463 // 10000 days
		variance = 0.33 // add per-kerbal variance
		individuality = 0.1
		modifier = living_space,comfort,pressure
		breakdown = true // trigger breakdown event instead of death
		warning_message = #OrbitaLoc_Kerbalism_rules_stress_warning
		danger_message = #OrbitaLoc_Kerbalism_rules_stress_danger
		relax_message = #OrbitaLoc_Kerbalism_rules_stress_relax
	}
	
	Rule {
		name = radiation
		title = #OrbitaLoc_Kerbalism_rules_radiation_name
		degeneration = 1.0 // just use the modifier
		variance = 0.1 // add per-kerbal variance
		individuality = 0.15
		lifetime = true // this is a life time value
		modifier = radiation,shielding
		warning_threshold = 25.0
		danger_threshold = 37.5
		fatal_threshold = 50.0
		warning_message = #OrbitaLoc_Kerbalism_rules_radiation_warning
		danger_message = #OrbitaLoc_Kerbalism_rules_radiation_danger
		fatal_message = #OrbitaLoc_Kerbalism_rules_radiation_fatal
		relax_message = #OrbitaLoc_Kerbalism_rules_radiation_relax
	}

	// =========
	// Processes
	// =========

	// <---Backend--->
	Process {
		// convention: When the vessel is in a breathable atmosphere, pressure control is automatically disabled and the air pump will pump air
		// into the vessel to maintain pressurization of any habitable areas, one example is inflating inflatable habitats without using any
		// N2 when a breathable atmosphere is present.
		name = air-pump
		title = #OrbitaLoc_Kerbalism_process_air-pump
		modifier = _AirPump,breathable
		input = ElectricCharge@0.00258
		output = Atmosphere@7.35
	}

	Process {
		name = atmosphere-leaks
		title = #OrbitaLoc_Kerbalism_process_atmosphere-leaks
		modifier = surface,non_breathable
		input = Atmosphere@0.000001899785682  // leakage of Atmosphere (N2) per second for a surface area of 1 m²
		// From ISS: see https://www.nasa.gov/pdf/179225main_ISS_Poster_Back.pdf and https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20110012997.pdf
		// 935 m³ volume, ~1105 m² surface (estimated), 0.227 Kg/day (structural)
		// Surface estimation: see the "Atmo Leak Estimation" spreadsheet in misc.
		// 1 Kerbin day is 1/4 of a human day so 0.227/4 = 0.05675 Kg/day
		// 0.05675 Kg/day over 1105 m² = 0.0513352488 (g/m²)/day.
		// Using the density of N2 from CRP we get 1.251 g/KSPunit = 0.0410353707 (unit/m²)/day
		// That divided over 21600 secs = 0.000001899785682 (unit/m²)/sec
	}
	
	Process {
		// convention: 1 capacity = enough to compensate for leaks in 70 m² surface area (a cube of 40 m³ volume, edge length of 3.42 m) per crew member
		// = 0.00025624796502 N2 to replace the Atmosphere leaked via the atmo leaks process for the above approx needed surface area per crew member
		name = pressure-control
		title = #OrbitaLoc_Kerbalism_process_pressure-control
		modifier = _PressureControl,non_breathable
		input = ElectricCharge@0.00858
		input = Nitrogen@0.35  // Much higher than amount needed for leak control to allow speedier pressurization of low pressure habs and inflatables
		output = Atmosphere@0.35
	}

	// <---Life Support--->
	Process {
		name = decontamination-unit
		title = #OrbitaLoc_Kerbalism_process_decontamination-unit
		modifier = _DecontaminationUnit
		input = ElectricCharge@3.5
		input = Oxygen@0.002
		output = CarbonDioxide@0.001987945992
		cures = radiation@0.000005555554 // 0.02 rad/h
		dump = true
	}

	Process {
		// convention: 1 capacity = enough to scrub output of 1 crew member for 1 day
		name = eva-scrubber
		title = #OrbitaLoc_Kerbalism_process_eva-scrubber
		modifier = _EVAScrubber
		input = WasteAtmosphere@0.0024915995    // efficiency starts at 2 (2 x a pods scrubber), reaches 1 in 6h, then drops below
		input = _EVAScrubber@0.000023148   // consume 0.5 capacity in 6h, simulates the scrubber wearing out over time.
		output = CarbonDioxide@0.0024915995
		dump = true
	}

	Process {
		// convention: 1 capacity = enough to scrub output of 1 crew member
		name = scrubber
		title = #OrbitaLoc_Kerbalism_process_scrubber
		modifier = _Scrubber
		input = ElectricCharge@0.025
		input = WasteAtmosphere@0.00124579975
		output = CarbonDioxide@0.00124579975
		dump_valve = CarbonDioxide
	}

	Process {
		// convention: 1 capacity = enough to recycle output of 1 crew member
		name = water-recycler
		title = #OrbitaLoc_Kerbalism_process_water-recycler
		modifier = _WaterRecycler
		input = ElectricCharge@0.0446
		input = WasteWater@0.00000619
		output = Water@0.000005262975 // ISS currently achieves 75% Water recovery from urine, although its design target was 85% (quality of urine is issue), we use the design target to be gentle on our users
		output = Ammonia@0.0000361969 // Based on https://en.wikipedia.org/wiki/Urine assume we recover 90% of 0.5% mass percentage of Ammonia, keep in mind Ammonia is far less dense than Water
		output = CarbonDioxide@0.0000142678 // Based on https://en.wikipedia.org/wiki/Urine assume we recover 90% of 0.5% mass percentage of CarbonDioxide, keep in mind CO2 is far less dense than Water
		dump_valve = Water,Ammonia,CarbonDioxide,Water&Ammonia,Water&CarbonDioxide,Ammonia&CarbonDioxide,Water&Ammonia&CarbonDioxide
	}

	// <---Stress Relief--->
	Process  {
		name = bathing-unit  // showers are complex
		title = #OrbitaLoc_Kerbalism_process_bathing-unit
		modifier = _BathingUnit
		input = ElectricCharge@0.014049975308642 //  sustained heating @4.184 J/gK to 313 K from 273 K storage temperature,
		input = Water@0.0000839507  // 5.44 L per shower, source : http://www.marsjournal.org/contents/2006/0005/files/rapp_mars_2006_0005.pdf
		output = WasteWater@0.0000839507  // water content fully recovered
		interval = 64800.0 // one shower every 18 hours / 3 days
		cures = stress@0.00000000463
	}

	Process {
		name = entertainment-unit
		title = #OrbitaLoc_Kerbalism_process_entertainment-unit
		modifier = _EntertainmentUnit
		input = ElectricCharge@0.057 // 32" OLED TV, source : https://www.rtings.com/tv/learn/led-oled-power-consumption-and-electricity-cost
		cures = stress@0.00000000463
	}

	Process {
		name = laundry-unit  // laundry is hard
		title = #OrbitaLoc_Kerbalism_process_laundry-unit
		modifier = _LaundryUnit // one complete kerbal outfit is 0.77 kg source : https://ttu-ir.tdl.org/ttu-ir/bitstream/handle/2346/72928/ICES_2017_106.pdf?sequence=1&isAllowed=y
		input = ElectricCharge@0.0463715278 //  13.36 kWh / 3.06 kg clothing
		input = Water@0.0763900389  // 22 L per 3.06 kg clothes
		output = WasteWater@0.0763900389  // water content fully recovered
		interval = 259200.0 // kerbals change clothes every 72 hours / 12 days
		cures = stress@0.00000000463
	}

	// <---Power Generation--->
	Process {
		name = clamp-generator
		title = #OrbitaLoc_Kerbalism_process_clamp-generator
		modifier = _ClampGen
		output = ElectricCharge@1.0
	}
	
	Process { 
		name = kerosene-fuel-cell
		title = #OrbitaLoc_Kerbalism_process_kerosene-fuel-cell
		modifier = _KeroseneFuelCell
		input = Kerosene@0.007621951
		input = LqdOxygen@0.010955302
		output = ElectricCharge@1.5 // Stock output
	}
	
	Process { // Ratios from CyroTanks. The default profile's numbers were more realistic but I wanted to be consistent
		name = hydrogen-fuel-cell
		title = #OrbitaLoc_Kerbalism_process_hydrogen-fuel-cell
		modifier = _HydrogenFuelCell
		input = LqdHydrogen@0.0309375
		input = LqdOxygen@0.009038124
		output = Water@0.012504421
		output = ElectricCharge@1.5
		dump_valve = Water
	}
	
	Process { // Ratios from CyroTanks/CryogenicEngines
		name = methane-fuel-cell
		title = #OrbitaLoc_Kerbalism_process_methane-fuel-cell
		modifier = _MethaneFuelCell
		input = LqdMethane@0.0061875
		input = LqdOxygen@0.009038124
		output = CarbonDioxide@4.390616644
		output = Water@0.007012886
		output = ElectricCharge@1.5
		dump_valve = CarbonDioxide,Water,CarbonDioxide&Water
	}
	
	Process { // Ratios extrapolated from above
		name = hydrazine-fuel-cell
		title = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell
		modifier = _HydrazineFuelCell
		input = Hydrazine@0.010283747
		input = LqdOxygen@0.009038124
		output = Nitrogen@7.215526619
		output = Water@0.01161244
		output = ElectricCharge@1.5
		dump_valve = Nitrogen,Water,Nitrogen&Water
	}

	Process {
		name = rtg
		title = #OrbitaLoc_Kerbalism_process_rtg
		modifier = _RTG
		input = _RTG@0.000000001888 // 28.8 kerbin-year half-life
		output = ElectricCharge@1.0
	}
	
	Process {
		name = waste-incinerator
		title = #OrbitaLoc_Kerbalism_process_waste-incinerator
		modifier = _WasteIncinerator
		input = Waste@0.0001082667 // H18C82
		input = LqdOxygen@0.000196386
		output = CarbonDioxide@0.1497439605
		output = Water@0.0000131259
		output = ElectricCharge@0.005
		dump_valve = Water,ElectricCharge,Water&ElectricCharge
	}

	// <---Production Processes--->
	// Standardized input volume of 1.0 units/sec. No materials are pressurized. EC is multiplied by 1.15 for waste heat)
	Process {
		name = crystal-processor
		title = #OrbitaLoc_Kerbalism_process_crystal-processor
		modifier = _CrystalProcessor
		input = Crystals@1.0
		input = ElectricCharge@0.54068285
		output = CarbonDioxide@644.031266
		output = Oxygen@323.9822695
		output = Lithium@0.742846442
		dump_valve = CarbonDioxide,Oxygen,Lithium,CarbonDioxide&Oxygen,CarbonDioxide&Lithium,Oxygen&Lithium
	}
	
	Process {
		name = ice-processor
		title = #OrbitaLoc_Kerbalism_process_ice-processor
		modifier = _IceProcessor
		input = Ices@1.0
		input = ElectricCharge@0.19097245
		output = Water@0.313541972
		output = CarbonDioxide@130.8243772
		output = Methane@259.5446583
		output = Ammonia@128.4345228
		dump_valve = Water,CarbonDioxide,Methane,Ammonia,Water&CarbonDioxide,Water&Methane,Water&Ammonia,CarbonDioxide&Methane,CarbonDioxide&Ammonia,Methane&Ammonia,Water&CarbonDioxide&Methane,Water&CarbonDioxide&Ammonia,CarbonDioxide&Methane&Ammonia
	}
	
	Process {
		name = metal-processor
		title = #OrbitaLoc_Kerbalism_process_metal-processor
		modifier = _MetalProcessor
		input = Metallics@1.0
		input = ElectricCharge@5.6068825
		output = Oxygen@1048.315603
		output = Silicon@0.278542293
		output = Aluminium@0.224963899
		dump_valve = Oxygen,Silicon,Aluminium,Oxygen&Silicon,Oxygen&Aluminium,Silicon&Aluminium
	}
	
	Process {
		name = rock-processor
		title = #OrbitaLoc_Kerbalism_process_rock-processor
		modifier = _RockProcessor
		input = Rocks@1.0
		input = ElectricCharge@3.6270701
		output = Oxygen@1000.609929
		output = Silicon@0.531820524
		output = Uraninite@0.000070667
		dump_valve = Oxygen,Silicon,Uraninite,Oxygen&Silicon,Oxygen&Uraninite,Silicon&Uraninite
	}
	
	Process {
		name = salt-processor
		title = #OrbitaLoc_Kerbalism_process_salt-processor
		modifier = _SaltProcessor
		input = Salts@1.0
		input = ElectricCharge@0.51775875
		output = Oxygen@733.6755319
		output = Ammonia@477.3472042
		output = Nitrogen@241.3069544
		output = Hydrogen@241.7686318
		dump_valve = Oxygen,Ammonia,Nitrogen,Hydrogen,Oxygen&Ammonia,Oxygen&Nitrogen,Oxygen&Hydrogen,Ammonia&Nitrogen,Ammonia&Hydrogen,Nitrogen&Hydrogen,Oxygen&Ammonia&Nitrogen,Oxygen&Ammonia&Hydrogen,Ammonia&Nitrogen&Hydrogen
	}
	
	Process {
		name = petroleum-refinery
		title = #OrbitaLoc_Kerbalism_process_petroleum-refinery
		modifier = _PetroleumRefinery
		input = Petroleum@1.0
		input = ElectricCharge@0.388175025
		output = Kerosene@1.036585366
	}
	
	Process {
		name = sabatier-reactor
		title = #OrbitaLoc_Kerbalism_process_sabatier-reactor
		modifier = _SabatierReactor
		input = LqdCO2@0.722263652
		input = LqdHydrogen@2.190574035
		input = ElectricCharge@0.8405442
		output = Water@0.693797816
		output = Methane@430.6836597
		dump_valve = Water,Methane
	}
	
	Process {
		name = haber-processor
		title = #OrbitaLoc_Kerbalism_process_haber-processor
		modifier = _HaberProcessor
		input = LqdNitrogen@0.688886003
		input = LqdHydrogen@1.732097581
		input = ElectricCharge@1.16128955
		output = Ammonia@898.5513654
	}
	
	Process {
		name = anthraquinone-processor
		title = #OrbitaLoc_Kerbalism_process_anthraquinone-processor
		modifier = _AnthraquinoneProcessor
		input = LqdOxygen@0.888745608
		input = LqdHydrogen@0.899015687
		input = ElectricCharge@0.04450822
		output = HydrogenPeroxide@0.743278621
	}
	
	Process {
		name = hydrazine-production
		title = #OrbitaLoc_Kerbalism_process_hydrazine-production
		modifier = _HydrazineProduction
		input = LqdAmmonia@0.766608386
		input = HydrogenPeroxide@0.370751898
		input = ElectricCharge@0.80481025
		output = Water@0.569327
		output = Hydrazine@0.504480957
		dump_valve = Water,Hydrazine
	}
	
	Process {
		name = selective-catalytic-oxidation
		title = #OrbitaLoc_Kerbalism_process_selective-catalytic-oxidation
		modifier = _SelectiveCatalyticOxidation
		input = LqdOxygen@0.491507207
		input = LqdAmmonia@0.566875483
		input = ElectricCharge@2.0708625
		output = Water@0.631570123
		output = Nitrogen@261.5850335
		dump_valve = Water,Nitrogen
	}
	
	Process {
		name = water-electrolysis
		title = #OrbitaLoc_Kerbalism_process_water-electrolysis
		modifier = _WaterElectrolysis
		input = Water@1.0
		input = ElectricCharge@23.1633
		output = Oxygen@629.7163121
		output = Hydrogen@1244.716352
		dump_valve = Oxygen,Hydrogen
	}
	
	Process {
		name = carbon-dioxide-electrolysis
		title = #OrbitaLoc_Kerbalism_process_carbon-dioxide-electrolysis
		modifier = _CarbonDioxideElectrolysis
		input = LqdCO2@1.0
		input = ElectricCharge@30.92296887
		output = Oxygen@0.747651249
		output = Waste@0.426906567
		dump_valve = Oxygen,Waste
	}
	
	Process {
		name = methane-pyrolysis
		title = #OrbitaLoc_Kerbalism_process_methane-pyrolysis
		modifier = _MethanePyrolysis
		input = LqdMethane@1.0
		input = ElectricCharge@2.8357689
		output = Waste@0.424929024
		output = Hydrogen@1189.719611
		dump_valve = Waste,Hydrogen
	}
	
	Process {
		name = ammonia-decomposition
		title = #OrbitaLoc_Kerbalism_process_ammonia-decomposition
		modifier = _AmmoniaDecomposition
		input = LqdAmmonia@1.0
		input = ElectricCharge@1.5862479
		output = Nitrogen@461.5563869
		output = Hydrogen@1387.018465
		dump_valve = Nitrogen,Hydrogen
	}
	
	Process {
		name = ammonia-condenser
		title = #OrbitaLoc_Kerbalism_process_ammonia-condenser
		modifier = _AmmoniaCondenser
		input = Ammonia@1084.648635
		input = ElectricCharge@0.232862612
		output = LqdAmmonia@1.188
	}
	
	Process {
		name = ammonia-evaporator
		title = #OrbitaLoc_Kerbalism_process_ammonia-evaporator
		modifier = _AmmoniaEvaporator
		input = LqdAmmonia@1.188
		input = ElectricCharge@0.232862612
		output = Ammonia@1084.648635
	}
	
	Process {
		name = carbon-dioxide-condenser
		title = #OrbitaLoc_Kerbalism_process_carbon-dioxide-condenser
		modifier = _CarbonDioxideCondenser
		input = CarbonDioxide@1190.099032
		input = ElectricCharge@0.195384712
		output = LqdCO2@1.979
	}
	
	Process {
		name = carbon-dioxide-evaporator
		title = #OrbitaLoc_Kerbalism_process_carbon-dioxide-evaporator
		modifier = _CarbonDioxideEvaporator
		input = LqdCO2@1.979
		input = ElectricCharge@0.195384712
		output = CarbonDioxide@1190.099032
	}
	
	Process {
		name = hydrogen-condenser
		title = #OrbitaLoc_Kerbalism_process_hydrogen-condenser
		modifier = _HydrogenCondenser
		input = Hydrogen@5910.734149
		input = ElectricCharge@2.0758875
		output = LqdHydrogen@7.5
	}
	
	Process {
		name = hydrogen-evaporator
		title = #OrbitaLoc_Kerbalism_process_hydrogen-evaporator
		modifier = _HydrogenEvaporator
		input = LqdHydrogen@7.5
		input = ElectricCharge@2.0758875
		output = Hydrogen@5910.734149
	}
	
	Process {
		name = methane-condenser
		title = #OrbitaLoc_Kerbalism_process_methane-condenser
		modifier = _MethaneCondenser
		input = Methane@2967.991632
		input = ElectricCharge@1.297085
		output = LqdMethane@5.0
	}
	
	Process {
		name = methane-evaporator
		title = #OrbitaLoc_Kerbalism_process_methane-evaporator
		modifier = _MethaneEvaporator
		input = LqdMethane@5.0
		input = ElectricCharge@1.297085
		output = Methane@2967.991632
	}
	
	Process {
		name = nitrogen-condenser
		title = #OrbitaLoc_Kerbalism_process_nitrogen-condenser
		modifier = _NitrogenCondenser
		input = Nitrogen@2176.013669
		input = ElectricCharge@1.1995071
		output = LqdNitrogen@3.3
	}
	
	Process {
		name = nitrogen-evaporator
		title = #OrbitaLoc_Kerbalism_process_nitrogen-evaporator
		modifier = _NitrogenEvaporator
		input = LqdNitrogen@3.3
		input = ElectricCharge@1.1995071
		output = Nitrogen@2176.013669
	}
	
	Process {
		name = oxygen-condenser
		title = #OrbitaLoc_Kerbalism_process_oxygen-condenser
		modifier = _OxygenCondenser
		input = Oxygen@3546.099291
		input = ElectricCharge@0.933799299
		output = LqdOxygen@4.382120947
	}
	
	Process {
		name = oxygen-evaporator
		title = #OrbitaLoc_Kerbalism_process_oxygen-evaporator
		modifier = _OxygenEvaporator
		input = LqdOxygen@4.382120947
		input = ElectricCharge@0.933799299
		output = Oxygen@3546.099291
	}
	
	// <---Lab Processes--->
	// Standardized main product output of 1.0 units/sec
	Process {
		name = shielding-synthesis
		title = #OrbitaLoc_Kerbalism_process_shielding-synthesis
		modifier = _ShieldingSynthesis
		input = DepletedUranium@0.878130011
		input = LqdCO2@2.484786766
		input = Silicon@0.488012707
		input = LqdHydrogen@3.460057157
		input = ElectricCharge@15.0
		output = Shielding@1.0
		output = Oxygen@1012.596383
		dump_valve = Oxygen
	}
	
	Process {
		name = part-assembly
		title = #OrbitaLoc_Kerbalism_process_part-assembly
		modifier = _PartAssembly
		input = Aluminium@0.676895307
		input = Silicon@0.268355517
		input = ElectricCharge@30.0
		output = RocketParts@1.0
	}
	
	Process { // Much lower volume throughput than the standard, enrichment is slow
		name = uraninite-enrichment
		title = #OrbitaLoc_Kerbalism_process_uraninite-enrichment
		modifier = _UraniniteEnrichment
		input = Uraninite@0.10
		input = ElectricCharge@62.1
		output = DepletedUranium@0.050223336
		output = EnrichedUranium@0.0100433
		output = Oxygen@63.03191489
		dump_valve = Oxygen
	}
}

// ===============================================
// Add life support processes to crewed components
// ===============================================

// Use different variable for compatibility
@PART[*]:HAS[#CrewCapacity[>0],!MODULE[KerbalSeat],~finalCrewCapacity]:NEEDS[ProfileOrbita]:BEFORE[OrbitaKerbalism] {
	finalCrewCapacity = #$/CrewCapacity$
}

@PART[*]:HAS[#finalCrewCapacity[>0]]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	MODULE {
		name = ProcessController
		resource = _HydrazineFuelCell
		title = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell
		capacity = 0.2
		@capacity *= #$/finalCrewCapacity$
		running = false
	}
	
	MODULE {
		name = ProcessController
		resource = _PressureControl
		title = #OrbitaLoc_Kerbalism_process_pressure-control
		capacity = #$/finalCrewCapacity$
		running = true
	}
	
	MODULE {
		name = ProcessController
		resource = _Scrubber
		title = #OrbitaLoc_Kerbalism_process_scrubber
		capacity = #$/finalCrewCapacity$
		running = false
		valve_i = 2
	}
	
	MODULE {
		name = ProcessController
		resource = _WaterRecycler
		title = #OrbitaLoc_Kerbalism_process_water-recycler
		capacity = #$/finalCrewCapacity$
		running = true
		valve_i = 6
	}
	
	@MODULE[ProcessController],* {
		@capacity *= 1.67
	}
	
	MODULE {
		name = Configure
		title = #OrbitaLoc_Kerbalism_types_life-support
		slots = 1
		@slots += #$/finalCrewCapacity$
		reconfigure = Engineer
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell
			desc = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell_desc
			tech = advElectrics
			mass = 0.1
			cost = 1000

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _HydrazineFuelCell
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_pressure-control
			desc = #OrbitaLoc_Kerbalism_process_pressure-control_desc
			tech = engineering101
			mass = 0.01
			cost = 250

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _PressureControl
			}
			
			RESOURCE {
				// approx 5 days of leaks and volume of a crew member
				// crew going eva will need the volume their bodies displaced within the vessel replaced with N2 to correct pressure drop,
				// vise versa when entering from eva the pressure will increase due to the volume of the Kerbal displacing
				// the internal vessel atmosphere, excess is vented overboard.
				// The pressure controller can be disabled to save N2 that will be used replacing the Kerbals volume,
				name = Nitrogen
				amount = #$/finalCrewCapacity$
				maxAmount = #$/finalCrewCapacity$
				@amount *= 331.3  // 1.3 for leaks, 330 Kerbal volume
				@maxAmount *= 331.3
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_scrubber
			desc = #OrbitaLoc_Kerbalism_process_scrubber_desc
			mass = 0.01
			cost = 250

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _Scrubber
			}
			
			RESOURCE {
				name = CarbonDioxide
				amount = 0
				maxAmount = #$/finalCrewCapacity$
				@maxAmount *= 135.1460789
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_water-recycler
			desc = #OrbitaLoc_Kerbalism_process_water-recycler_desc
			tech = spaceExploration
			mass = 0.05
			cost = 500


			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _WaterRecycler
			}

			RESOURCE {
				name = WasteWater
				amount = 0
				maxAmount = #$/finalCrewCapacity$
				@maxAmount *= 5
			}
		}

		SETUP {
			name = #OrbitaLoc_Kerbalism_process_empty
			desc = #OrbitaLoc_Kerbalism_process_empty_desc
		}
	}
}

// Parts can't have more than four slots, and remove compatibility variable
@PART[*]:HAS[#finalCrewCapacity[*],@MODULE[Configure]:HAS[#slots[>4]]]:NEEDS[ProfileOrbita]:AFTER[OrbitaKerbalism] {
	-finalCrewCapacity = 0
	@MODULE[Configure] {
		@slots = 4
	}
}

// boost Mk3 Shuttle cockpit and Science Lab Nitrogen storage
@PART[mk3Cockpit_Shuttle,Large_Crewed_Lab]:NEEDS[ProfileOrbita]:AFTER[OrbitaKerbalism] {
	@MODULE[Configure]:HAS[#title[#OrbitaLoc_Kerbalism_types_life-support]] {
		@SETUP[Pressure?Control] {
			@RESOURCE[Nitrogen] {
				@amount *= 3
				@maxAmount *= 3
			}
		}
	}
}

// =====================================================
// Add life support processes to the life support module
// =====================================================

@PART[lifeSupportModule]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	MODULE {
		name = ProcessController
		resource = _AirPump
		title = #OrbitaLoc_Kerbalism_process_air-pump
		capacity = 3
		running = true
	}

	MODULE {
		name = ProcessController
		resource = _HydrazineFuelCell
		title = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell
		capacity = 0.2
		@capcity *= 3
		running = false
	}
	
	MODULE {
		name = ProcessController
		resource = _PressureControl
		title = #OrbitaLoc_Kerbalism_process_pressure-control
		capacity = 3
		running = true
	}
	
	MODULE {
		name = ProcessController
		resource = _Scrubber
		title = #OrbitaLoc_Kerbalism_process_scrubber
		capacity = 3
		running = true
	}
	
	MODULE {
		name = ProcessController
		resource = _WaterRecycler
		title = #OrbitaLoc_Kerbalism_process_water-recycler
		capacity = 3
		running = true
		valve_i = 6
	}
	
	@MODULE[ProcessController],* {
		@capacity *= 1.67
	}
	
	MODULE {
		name = Configure
		title = #OrbitaLoc_Kerbalism_types_life-support
		slots = 2
		reconfigure = Engineer
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_air-pump
			desc = #OrbitaLoc_Kerbalism_process_air-pump_desc
			mass = 0.1
			cost = 1000

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _AirPump
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell
			desc = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell_desc
			tech = advElectrics
			mass = 0.1
			cost = 1000

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _HydrazineFuelCell
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_pressure-control
			desc = #OrbitaLoc_Kerbalism_process_pressure-control_desc
			tech = engineering101
			mass = 0.01
			cost = 250

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _PressureControl
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_scrubber
			desc = #OrbitaLoc_Kerbalism_process_scrubber_desc
			mass = 0.01
			cost = 250

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _Scrubber
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_water-recycler
			desc = #OrbitaLoc_Kerbalism_process_water-recycler_desc
			tech = spaceExploration
			mass = 0.05
			cost = 500


			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _WaterRecycler
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_empty
			desc = #OrbitaLoc_Kerbalism_process_empty_desc
		}
	}
}

// ===========================
// Add EVA Scrubber to kerbals
// ===========================

@PART[kerbalEVA*]:HAS[@MODULE[ModuleTripLogger]]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	MODULE {
		name = ProcessController
		resource = _EVAScrubber
		title = #OrbitaLoc_Kerbalism_process_eva-scrubber
		capacity = 1.0
		toggle = true
		running = true
	}
}

// ==============================
// Add generator to Launch Clamps
// ==============================

@PART[launchClamp1]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	MODULE {
		name = ProcessController
		resource = _ClampGen
		title = #OrbitaLoc_Kerbalism_process_clamp-generator
		capacity = 1.0
		running = true
		toggle = false
	}

	!MODULE[ModuleGenerator] {}
}

// =======================
// Add RTG process to RTGs
// =======================

@PART[rtg]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	MODULE {
		name = ProcessController
		resource = _RTG
		title = #OrbitaLoc_Kerbalism_process_rtg
		capacity = 0.75
		running = true
		toggle = false
	}

	!MODULE[ModuleGenerator] {}
	!MODULE[ModuleCoreHeat] {}
}

// ============================================================================
// Fuel cells
// ============================================================================

@PART[FuelCell,FuelCellArray]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	@TechRequired = electrics

	!MODULE[ModuleResourceConverter],* {}
	!RESOURCE[ElectricCharge] {}

	MODULE {
		name = ProcessController
		resource = _KeroseneFuelCell
		title = #OrbitaLoc_Kerbalism_process_kerosene-fuel-cell
		capacity = 1
	}

	MODULE {
		name = ProcessController
		resource = _HydrogenFuelCell
		title = #OrbitaLoc_Kerbalism_process_hydrogen-fuel-cell
		capacity = 1
		valve_i = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _MethaneFuelCell
		title = #OrbitaLoc_Kerbalism_process_methane-fuel-cell
		capacity = 1
	}

	MODULE:NEEDS[!ReStockPlus] {
		name = ProcessController
		resource = _HydrazineFuelCell
		title = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell
		capacity = 1
	}

	MODULE {
		name = Configure
		title = #OrbitaLoc_Kerbalism_types_fuel-cell
		slots = 1
		reconfigure = Engineer

		SETUP {
			name = #OrbitaLoc_Kerbalism_process_kerosene-fuel-cell
			desc = #OrbitaLoc_Kerbalism_process_kerosene-fuel-cell_desc

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _KeroseneFuelCell
			}
		}

		SETUP {
			name = #OrbitaLoc_Kerbalism_process_hydrogen-fuel-cell
			desc = #OrbitaLoc_Kerbalism_process_hydrogen-fuel-cell_desc

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _HydrogenFuelCell
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_methane-fuel-cell
			desc = #OrbitaLoc_Kerbalism_process_methane-fuel-cell_desc

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _MethaneFuelCell
			}
		}
		
		SETUP:NEEDS[!ReStockPlus] {
			name = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell
			desc = #OrbitaLoc_Kerbalism_process_hydrazine-fuel-cell_desc
			tech = advElectrics

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _HydrazineFuelCell
			}
		}
	}

	MODULE:NEEDS[FeatureReliability] {
		name = Reliability
		type = ProcessController
		title = #OrbitaLoc_Kerbalism_types_fuel-cell
		redundancy = Power Generation
		repair = Engineer
		mtbf = 72576000
		extra_cost = 1.0
		extra_mass = 0.5
	}
}

@PART[FuelCellArray]:NEEDS[ProfileOrbita]:AFTER[OrbitaKerbalism] {
	@TechRequired = advElectrics
	
	@MODULE[ProcessController],* {
		@capacity *= 12
	}
}

// =================================
// Add production processes to ISRUs
// =================================

@PART[TinyISRU,MiniISRU,ISRU]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	!MODULE[ModuleResourceConverter],* {}
	!MODULE[ModuleOverheatDisplay],* {}
	!MODULE[ModuleCoreHeat],* {}
	
	MODULE {
		name = ProcessController
		resource = _CrystalProcessor
		title = #OrbitaLoc_Kerbalism_process_crystal-processor
		capacity = 1
		valve_i = 2 // workaround until we have a better way to deal with dump valves
	}
	
	MODULE {
		name = ProcessController
		resource = _IceProcessor
		title = #OrbitaLoc_Kerbalism_process_ice-processor
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _MetalProcessor
		title = #OrbitaLoc_Kerbalism_process_metal-processor
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _RockProcessor
		title = #OrbitaLoc_Kerbalism_process_rock-processor
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _SaltProcessor
		title = #OrbitaLoc_Kerbalism_process_salt-processor
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _PetroleumRefinery
		title = #OrbitaLoc_Kerbalism_process_petroleum-refinery
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _SabatierReactor
		title = #OrbitaLoc_Kerbalism_process_sabatier-reactor
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _HaberProcessor
		title = #OrbitaLoc_Kerbalism_process_haber-processor
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _AnthraquinoneProcessor
		title = #OrbitaLoc_Kerbalism_process_anthraquinone-processor
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _HydrazineProduction
		title = #OrbitaLoc_Kerbalism_process_hydrazine-production
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _SelectiveCatalyticOxidation
		title = #OrbitaLoc_Kerbalism_process_selective-catalytic-oxidation
		capacity = 1
	}

	MODULE {
		name = ProcessController
		resource = _WaterElectrolysis
		title = #OrbitaLoc_Kerbalism_process_water-electrolysis
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _CarbonDioxideElectrolysis
		title = #OrbitaLoc_Kerbalism_process_carbon-dioxide-electrolysis
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _MethanePyrolysis
		title = #OrbitaLoc_Kerbalism_process_methane-pyrolysis
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _AmmoniaDecomposition
		title = #OrbitaLoc_Kerbalism_process_ammonia-decomposition
		capacity = 1
	}

	MODULE {
		name = ProcessController
		resource = _AmmoniaCondenser
		title = #OrbitaLoc_Kerbalism_process_ammonia-condenser
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _AmmoniaEvaporator
		title = #OrbitaLoc_Kerbalism_process_ammonia-evaporator
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _CarbonDioxideCondenser
		title = #OrbitaLoc_Kerbalism_process_carbon-dioxide-condenser
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _CarbonDioxideEvaporator
		title = #OrbitaLoc_Kerbalism_process_carbon-dioxide-evaporator
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _HydrogenCondenser
		title = #OrbitaLoc_Kerbalism_process_hydrogen-condenser
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _HydrogenEvaporator
		title = #OrbitaLoc_Kerbalism_process_hydrogen-evaporator
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _MethaneCondenser
		title = #OrbitaLoc_Kerbalism_process_methane-condenser
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _MethaneEvaporator
		title = #OrbitaLoc_Kerbalism_process_methane-evaporator
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _NitrogenCondenser
		title = #OrbitaLoc_Kerbalism_process_nitrogen-condenser
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _NitrogenEvaporator
		title = #OrbitaLoc_Kerbalism_process_nitrogen-evaporator
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _OxygenCondenser
		title = #OrbitaLoc_Kerbalism_process_oxygen-condenser
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _OxygenEvaporator
		title = #OrbitaLoc_Kerbalism_process_oxygen-evaporator
		capacity = 1
	}
	
	MODULE {
		name = Configure
		title = #OrbitaLoc_Kerbalism_types_isru
		slots = 6
		reconfigure = Engineer
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_crystal-processor
			desc = #OrbitaLoc_Kerbalism_process_crystal-processor_desc
			mass = 0.15
			cost = 1500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _CrystalProcessor
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_ice-processor
			desc = #OrbitaLoc_Kerbalism_process_ice-processor_desc
			mass = 0.15
			cost = 1500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _IceProcessor
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_metal-processor
			desc = #OrbitaLoc_Kerbalism_process_metal-processor_desc
			mass = 0.15
			cost = 1500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _MetalProcessor
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_rock-processor
			desc = #OrbitaLoc_Kerbalism_process_rock-processor_desc
			mass = 0.15
			cost = 1500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _RockProcessor
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_salt-processor
			desc = #OrbitaLoc_Kerbalism_process_salt-processor_desc
			mass = 0.15
			cost = 1500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _SaltProcessor
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_petroleum-refinery
			desc = #OrbitaLoc_Kerbalism_process_petroleum-refinery_desc
			mass = 0.1
			cost = 1000

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _PetroleumRefinery
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_sabatier-reactor
			desc = #OrbitaLoc_Kerbalism_process_sabatier-reactor_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _SabatierReactor
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_haber-processor
			desc = #OrbitaLoc_Kerbalism_process_haber-processor_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _HaberProcessor
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_anthraquinone-processor
			desc = #OrbitaLoc_Kerbalism_process_anthraquinone-processor_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _AnthraquinoneProcessor
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_hydrazine-production
			desc = #OrbitaLoc_Kerbalism_process_hydrazine-production_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _HydrazineProduction
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_selective-catalytic-oxidation
			desc = #OrbitaLoc_Kerbalism_process_selective-catalytic-oxidation_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _SelectiveCatalyticOxidation
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_water-electrolysis
			desc = #OrbitaLoc_Kerbalism_process_water-electrolysis_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _WaterElectrolysis
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_carbon-dioxide-electrolysis
			desc = #OrbitaLoc_Kerbalism_process_carbon-dioxide-electrolysis_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _CarbonDioxideElectrolysis
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_methane-pyrolysis
			desc = #OrbitaLoc_Kerbalism_process_methane-pyrolysis_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _MethanePyrolysis
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_ammonia-decomposition
			desc = #OrbitaLoc_Kerbalism_process_ammonia-decomposition_desc
			mass = 0.075
			cost = 1750

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _AmmoniaDecomposition
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_ammonia-condenser
			desc = #OrbitaLoc_Kerbalism_process_ammonia-condenser_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _AmmoniaCondenser
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_ammonia-evaporator
			desc = #OrbitaLoc_Kerbalism_process_ammonia-evaporator_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _AmmoniaEvaporator
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_carbon-dioxide-condenser
			desc = #OrbitaLoc_Kerbalism_process_carbon-dioxide-condenser_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _CarbonDioxideCondenser
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_carbon-dioxide-evaporator
			desc = #OrbitaLoc_Kerbalism_process_carbon-dioxide-evaporator_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _CarbonDioxideEvaporator
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_hydrogen-condenser
			desc = #OrbitaLoc_Kerbalism_process_hydrogen-condenser_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _HydrogenCondenser
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_hydrogen-evaporator
			desc = #OrbitaLoc_Kerbalism_process_hydrogen-evaporator_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _HydrogenEvaporator
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_methane-condenser
			desc = #OrbitaLoc_Kerbalism_process_methane-condenser_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _MethaneCondenser
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_methane-evaporator
			desc = #OrbitaLoc_Kerbalism_process_methane-evaporator_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _MethaneEvaporator
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_nitrogen-condenser
			desc = #OrbitaLoc_Kerbalism_process_nitrogen-condenser_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _NitrogenCondenser
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_nitrogen-evaporator
			desc = #OrbitaLoc_Kerbalism_process_nitrogen-evaporator_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _NitrogenEvaporator
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_oxygen-condenser
			desc = #OrbitaLoc_Kerbalism_process_oxygen-condenser_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _OxygenCondenser
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_oxygen-evaporator
			desc = #OrbitaLoc_Kerbalism_process_oxygen-evaporator_desc
			mass = 0.05
			cost = 500

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _OxygenEvaporator
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_empty
			desc = #OrbitaLoc_Kerbalism_process_empty_desc
		}
	}
	
	MODULE:NEEDS[FeatureReliability] {
		name = Reliability
		type = ProcessController
		title = #OrbitaLoc_Kerbalism_types_isru
		repair = Engineer
		mtbf = 72576000
		extra_cost = 1.0
		extra_mass = 0.2
	}
}

@PART[MiniISRU]:NEEDS[ProfileOrbita]:AFTER[OrbitaKerbalism] {
	@MODULE[ProcessController],* {
		@capacity /= 1.5
	}

	@MODULE[Configure] {
		@slots = 4
		
		@SETUP:HAS[@RESOURCE[*]] {
			@RESOURCE[*] {
				@maxAmount /= 1.5
			}
		}
	}
}

@PART[TinyISRU]:NEEDS[ProfileOrbita]:AFTER[OrbitaKerbalism] {
	@MODULE[ProcessController],* {
		@capacity /= 3
	}
	
	@MODULE[Configure] {
		@slots = 2
		
		@SETUP:HAS[@RESOURCE[*]] {
			@RESOURCE[*] {
				@maxAmount /= 3
			}
		}
	}
}

// ============================
// Add processes to science lab
// ============================

@PART[Large_Crewed_Lab]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	MODULE {
		name = ProcessController
		resource = _ShieldingSynthesis
		title = #OrbitaLoc_Kerbalism_process_shielding-synthesis
		capacity = 1
		valve_i = 2
	}
	
	MODULE {
		name = ProcessController
		resource = _PartAssembly
		title = #OrbitaLoc_Kerbalism_process_part-assembly
		capacity = 1
	}
	
	MODULE {
		name = ProcessController
		resource = _UraniniteEnrichment
		title = #OrbitaLoc_Kerbalism_process_uraninite-enrichment
		capacity = 1
	}
	
	MODULE {
		name = Configure
		title = #OrbitaLoc_Kerbalism_types_science-lab
		slots = 1
		reconfigure = Scientist

		SETUP {
			name = #OrbitaLoc_Kerbalism_process_shielding-synthesis
			desc = #OrbitaLoc_Kerbalism_process_shielding-synthesis_desc
			mass = 0.5
			cost = 5000

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _ShieldingSynthesis
			}
			
			RESOURCE {
				name = Shielding
				amount = 0
				maxAmount = 50 // change this
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Kerbalism_process_part-assembly
			desc = #OrbitaLoc_Kerbalism_process_part-assembly_desc
			mass = 0.5
			cost = 5000

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _PartAssembly
			}
			
			RESOURCE {
				name = RocketParts
				amount = 0
				maxAmount = 200 // change this
			}
		}

		SETUP {
			name = #OrbitaLoc_Kerbalism_process_uraninite-enrichment
			desc = #OrbitaLoc_Kerbalism_process_uraninite-enrichment_desc
			mass = 0.5
			cost = 5000

			MODULE {
				type = ProcessController
				id_field = resource
				id_value = _UraniniteEnrichment
			}
			
			RESOURCE {
				name = DepletedUranium
				amount = 0.0
				maxAmount = 5.0
			}
			
			RESOURCE {
				name = EnrichedUranium
				amount = 0.0
				maxAmount = 1.0
			}
		}

		SETUP {
			name = #OrbitaLoc_Kerbalism_process_empty
			desc = #OrbitaLoc_Kerbalism_process_empty_desc
		}
	}
	
	// MODULE:NEEDS[FeatureReliability] {
		// name = Reliability
		// type = ProcessController
		// title = #OrbitaLoc_Kerbalism_types_science-lab
		// repair = Engineer
		// mtbf = 72576000
		// extra_cost = 1.0
		// extra_mass = 0.2
	// }
}

// ========================
// Replace drill harvesters
// ========================

@ORBITA_VARIABLES:BEFORE[OrbitaKerbalism]:NEEDS[ProfileOrbita] {
	%KerbalismDrills {
		abundance_rate = 1.0
		min_abundance = 0.01
		rate = 1.5
		ec_rate = 15.0
	}
}

@PART[MiniDrill,RadialDrill]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	!MODULE[ModuleResourceHarvester] {}
	!MODULE[ModuleOverheatDisplay] {}
	!MODULE[ModuleCoreHeat] {}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_Drill_Crystals_ConverterName
		type = 0
		resource = Crystals
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismDrills/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismDrills/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismDrills/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_Drill_Ices_ConverterName
		type = 0
		resource = Ices
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismDrills/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismDrills/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismDrills/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_Drill_Metallics_ConverterName
		type = 0
		resource = Metallics
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismDrills/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismDrills/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismDrills/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_Drill_Rocks_ConverterName
		type = 0
		resource = Rocks
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismDrills/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismDrills/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismDrills/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_Drill_Salts_ConverterName
		type = 0
		resource = Salts
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismDrills/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismDrills/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismDrills/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_Drill_Petroleum_ConverterName
		type = 0
		resource = Petroleum
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismDrills/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismDrills/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismDrills/ec_rate$
	}

	MODULE {
		name = Configure
		title = #OrbitaLoc_Kerbalism_types_mining-drill
		slots = 1
		reconfigure = Engineer

		SETUP {
			name = #OrbitaLoc_Drill_Crystals_ConverterName
			desc = #OrbitaLoc_Drill_Crystals_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Crystals
			}
		}

		SETUP {
			name = #OrbitaLoc_Drill_Ices_ConverterName
			desc = #OrbitaLoc_Drill_Ices_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Ices
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Drill_Metallics_ConverterName
			desc = #OrbitaLoc_Drill_Metallics_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Metallics
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Drill_Rocks_ConverterName
			desc = #OrbitaLoc_Drill_Rocks_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Rocks
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Drill_Salts_ConverterName
			desc = #OrbitaLoc_Drill_Salts_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Salts
			}
		}
		
		SETUP {
			name = #OrbitaLoc_Drill_Petroleum_ConverterName
			desc = #OrbitaLoc_Drill_Petroleum_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Petroleum
			}
		}
	}
	
	MODULE:NEEDS[FeatureReliability] {
		name = Reliability
		type = Harvester
		title = #OrbitaLoc_Kerbalism_types_mining-drill
		repair = Engineer
		mtbf = 72576000
		extra_cost = 1.0
		extra_mass = 0.2
	}
}

@PART[MiniDrill]:NEEDS[ProfileOrbita]:AFTER[OrbitaKerbalism] {
	@MODULE[Harvester],* {
		@rate /= 5
		@ec_rate /= 5
		drill = ImpactTransform
		length = 1.08
	}
}

@PART[RadialDrill]:NEEDS[ProfileOrbita]:AFTER[OrbitaKerbalism] {
	@MODULE[Harvester],* {
		drill = ImpactTransform
		length = 5.42
	}
}

// ===============================
// Replace liquid scoop harvesters
// ===============================

@ORBITA_VARIABLES:BEFORE[OrbitaKerbalism]:NEEDS[ProfileOrbita] {
	%KerbalismLqdScoop {
		abundance_rate = 1.0
		min_abundance = 0.01
		rate = 3.0
		ec_rate = 6.0
	}
}

@PART[*]:HAS[#OceanHarvester[true]]:NEEDS[ProfileOrbita]:FOR[OrbitaKerbalism] {
	!MODULE[ModuleResourceHarvester],* {}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_LqdScp_Water_ConverterName
		type = 1
		resource = Water
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismLqdScoop/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_LqdScp_HydrogenPeroxide_ConverterName
		type = 1
		resource = HydrogenPeroxide
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismLqdScoop/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_LqdScp_Kerosene_ConverterName
		type = 1
		resource = Kerosene
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismLqdScoop/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_LqdScp_LqdMethane_ConverterName
		type = 1
		resource = LqdMethane
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismLqdScoop/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_LqdScp_LqdOxygen_ConverterName
		type = 1
		resource = LqdOxygen
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismLqdScoop/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/ec_rate$
	}
	
	MODULE {
		name = Harvester
		title = #OrbitaLoc_LqdScp_Salts_ConverterName
		type = 1
		resource = Salts
		abundance_rate = #$@ORBITA_VARIABLES/KerbalismDrills/abundance_rate$
		min_abundance = #$@ORBITA_VARIABLES/KerbalismLqdScoop/min_abundance$
		rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/rate$
		ec_rate = #$@ORBITA_VARIABLES/KerbalismLqdScoop/ec_rate$
	}
	
	MODULE {
		name = Configure
		title = #OrbitaLoc_Kerbalism_types_liquid-scoop
		slots = 1
		reconfigure = Engineer

		SETUP {
			name = #OrbitaLoc_LqdScp_Water_ConverterName
			desc = #OrbitaLoc_LqdScp_Water_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Water
			}
		}

		SETUP {
			name = #OrbitaLoc_LqdScp_HydrogenPeroxide_ConverterName
			desc = #OrbitaLoc_LqdScp_HydrogenPeroxide_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = HydrogenPeroxide
			}
		}

		SETUP {
			name = #OrbitaLoc_LqdScp_Kerosene_ConverterName
			desc = #OrbitaLoc_LqdScp_Kerosene_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Kerosene
			}
		}
		
		SETUP {
			name = #OrbitaLoc_LqdScp_LqdMethane_ConverterName
			desc = #OrbitaLoc_LqdScp_LqdMethane_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = LqdMethane
			}
		}
		
		SETUP {
			name = #OrbitaLoc_LqdScp_LqdOxygen_ConverterName
			desc = #OrbitaLoc_LqdScp_LqdOxygen_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = LqdOxygen
			}
		}
		
		SETUP {
			name = #OrbitaLoc_LqdScp_Salts_ConverterName
			desc = #OrbitaLoc_LqdScp_Salts_desc

			MODULE {
				type = Harvester
				id_field = resource
				id_value = Salts
			}
		}
	}

	MODULE:NEEDS[FeatureReliability] {
		name = Reliability
		type = Harvester
		title = #OrbitaLoc_Kerbalism_types_liquid-scoop
		repair = Engineer
		mtbf = 72576000
		extra_cost = 1.0
		extra_mass = 0.2
	}
}

@PART[liquidScoop]:NEEDS[ProfileOrbita,RationalResourcesParts]:AFTER[OrbitaKerbalism] {
	@MODULE[Harvester],* {
		@rate /= 5
		@ec_rate /= 5
	}
}

// ============================
// Setup the default greenhouse
// ============================

@PART[defaultGreenhouse]:NEEDS[ProfileOrbita,StationPartsExpansionRedux]:FOR[OrbitaKerbalism] {
	MODULE {
		name = Greenhouse
		// Please note the Greenhouse is its own process and does not work like the standard processes, for example the WasteAtmosphere and
		// CarbonDioxide INPUT_RESOURCE parameters work together and can internally interchange information depending on conditions, see below.

		crop_resource = Food // name of resource produced by harvests
		// Based on design targets from Prototype Lunar Greenhouse (see https://www.ag.arizona.edu/lunargreenhouse/MidReviews.htm ):
		// Design targets are on slide 18 of https://www.ag.arizona.edu/lunargreenhouse/Documents/2012-07-20_01_Giacomelli.pdf
		// Prototype Lunar Greenhouse geometry can be found on slide 14 of https://www.ag.arizona.edu/lunargreenhouse/Documents/2012-07-20_01_Giacomelli.pdf
		// Much larger design for producing food for 6 people can be found here (values not used): https://www.degruyter.com/downloadpdf/j/opag.2017.2.issue-1/opag-2017-0011/opag-2017-0011.pdf
		// This Greenhouse is assumed to have 24 m^3 volume dedicated to food production (all greenhouses in mod support files are calculated relative to this one).
		// This Greenhouse is intended to support 0.5 Kerbal just like the Prototype Lunar Greenhouse.
		// Harvest time is 200 days, but in order to avoid micromanagement this greenhouse supports 0.5 Kerbal for 210 days.
		// Kerbals need 52.5 food per 200 days, converted to 210 days that is 55.125 food.
		crop_size = 27.5625 // amount of resource produced by harvests
		crop_rate = 0.00000023148 // growth per second when all conditions apply, a fully grown crop equals value of 1.0
		ec_rate = 2.5 // EC/s consumed by the lamp at max intensity

		light_tolerance = 400.0 // minimum lighting flux required for growth, in W/m^2
		pressure_tolerance = 0.1 // minimum pressure required for growth, in sea level atmospheres
		radiation_tolerance = 0.000008333 // maximum radiation allowed for growth in rad/s, considered after shielding is applied

		lamps = Cylinder001 // object with emissive texture used to represent lamp intensity graphically
		shutters = door // animation to manipulate shutters
		plants = // animation to represent plant growth graphically

		INPUT_RESOURCE {
			name = Ammonia
			rate = 0.000095703125 // 15 units required per unit of crop, i.e. 200 days * 3600 seconds per hour * 6 hours * rate == 15 * crop_size
		}

		// Photosynthesis reaction: 2xH2O + CO2 -> O2 + CH2O + H2O
		// Note that CH2O is an intermediate carbohydrate, energy that goes into the food, in the actual food it can be any CxHyOz compound

		// In a hydroponic system plants grow in water containing nutrients, the system is assumed to be closed loop.
		// Therefore only the water loss during photosynthesis is modeled.

		// Water efficient foods require around 250-500 L water per kg of crop (see https://www.theguardian.com/news/datablog/2013/jan/10/how-much-water-food-production-waste)
		// In a regenerative system (see https://www.ag.arizona.edu/lunargreenhouse/Documents/2012-07-20_01_Giacomelli.pdf slide 19) water is also produced.
		// In this example effective water consumption is 4.3 L per day. Every day approximately 2.4 kg of biomass is produced (not all of which can be eaten).
		// In this example the effective water consumption per kg of biomass is 1.8 L/kg.
		// TODO: Figure out what percentage of biomass actually becomes Food.
		// TODO: Figure how to recover the non-eatable biomass.
		// 1 unit of Food has a mass 0.28 kg (see community resource pack), therefore we will use 1.8 L/kg * 0.28 kg = 0.5 L of Water
		// 1 unit of Water matches 1 L, so we need 0.5 units of Water per unit of Food.
		INPUT_RESOURCE {
			name = Water
			rate = 0.0000031901 // 0.5 units required per unit of crop, i.e. 200 days * 3600 seconds per hour * 6 hours * rate == 0.5 * crop_size
		}

		INPUT_RESOURCE {
			name = WasteAtmosphere // Plants work on WasteAtmosphere and replace a scrubber, if not enough WasteAtmosphere exists then CO2 is used
			rate = 0.00124579975   // Matched to a Kerbals WasteAtmosphere output which is 75% of required CO2 for crops according to documents linked above
		}                          // WasteAtmosphere has the same density as CO2

		INPUT_RESOURCE {
			name = CarbonDioxide  // Kerbals don't provide enough WasteAtmosphere for their required food production. If excess WasteAtmosphere is
								  // present then it will be used in place of CO2 injection
			rate = 0.000415266575 // Remaining 25% of CO2 required.
		}

		// Note. if there is a deficiency in the amount of WasteAtmosphere needed then the missing amount of WasteAtmosphere will be added to the
		// CarbonDioxide input and Vies Versa if not enough CarbonDioxide is present and there is extra WasteAtmosphere.
		// If there is not enough resources then the plants will suffer.

		OUTPUT_RESOURCE {
			name = Oxygen
			rate = 0.00172379825 // 100% of oxygen required by 1 crew member, based on Prototype Lunar Greenhouse design targets
		}                        // (percentage is factor 2 larger than food)
	}

	MODULE {
		name = ProcessController
		resource = _PressureControl
		title = #OrbitaLoc_Kerbalism_process_pressure-control
		capacity = 0.2143
		running = true
	}

	RESOURCE {
		name = Ammonia
		amount = 272 // enough for 202 days including reclaimed ammonia from wastes, one crop cycle, two greenhouses combined
		maxAmount = 272
	}

	// CarbonDioxide is provided because humans don't provide enough CO2 for their required food production
	// Both https://www.space.com/9353-lunar-greenhouse-grow-food-future-moon-colonies.html and
	// https://www.degruyter.com/downloadpdf/j/opag.2017.2.issue-1/opag-2017-0011/opag-2017-0011.pdf
	// mention CO2 injection despite being closed loop systems.
	RESOURCE {
		name = CarbonDioxide
		amount = 4500 // enough for 202 days of CO2 injection (25% of total CO2 required), one crop cycle, two greenhouses combined
		maxAmount = 4500
	}

	// To support the pressure control
	RESOURCE {
		name = Nitrogen
		amount = 10000 // enough for 201 days , one crop cycle
		maxAmount = 10000
	}

	RESOURCE {
		name = Water
		amount = 11 // enough for 208 days including reclaimed water from wastes, one crop cycle, two greenhouses combined
		maxAmount = 11
	}
}

// ================
// Psuedo Resources
// ================

RESOURCE_DEFINITION {
	name = _AirPump
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _PressureControl
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _Scrubber
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _EVAScrubber
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _WaterRecycler
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _ClampGen
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _HydrazineFuelCell
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _HydrogenFuelCell
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _RTG
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _WasteIncinerator
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _CrystalProcessor
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _IceProcessor
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _MetalProcessor
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _RockProcessor
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _SaltProcessor
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _PetroleumRefinery
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _SabatierReactor
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _HaberProcessor
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _AnthraquinoneProcessor
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _HydrazineProduction
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _SelectiveCatalyticOxidation
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _WaterElectrolysis
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _CarbonDioxideElectrolysis
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _MethanePyrolysis
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _AmmoniaDecomposition
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _AmmoniaCondenser
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _AmmoniaEvaporator
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _CarbonDioxideCondenser
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _CarbonDioxideEvaporator
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _HydrogenCondenser
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _HydrogenEvaporator
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _MethaneCondenser
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _MethaneEvaporator
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _NitrogenCondenser
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _NitrogenEvaporator
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _OxygenCondenser
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _OxygenEvaporator
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _ShieldingSynthesis
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _PartAssembly
	density = 0.0
	isVisible = false
}

RESOURCE_DEFINITION {
	name = _UraniniteEnrichment
	density = 0.0
	isVisible = false
}

// ====
// Misc
// ====

// Remove Nitrogen from fuel flow priorities
@RESOURCE_DEFINITION[Nitrogen] {
	@flowMode = ALL_VESSEL
}

// Remove pressure controlmodules from all habitats that have a max_pressure set
@PART[*]:HAS[@MODULE[Habitat]:HAS[#max_pressure]]:NEEDS[ProfileOrbita]:LAST[OrbitaKerbalism] {
	!MODULE[ProcessController]:HAS[#resource[_PressureControl]] {}
	@MODULE[Configure] {
		!SETUP[#OrbitaLoc_Kerbalism_process_pressure-control] {}
	}
}
