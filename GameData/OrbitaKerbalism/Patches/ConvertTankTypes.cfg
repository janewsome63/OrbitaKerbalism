// Convert Tank Types

// Tank Definitions
// Default
@B9_TANK_TYPE[LiquidFuel]:NEEDS[B9PartSwitch]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[LiquidFuel] {
		@name = Kerosene
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[LiquidFuel]/density$
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[Kerosene]/density$
	}
}

@B9_TANK_TYPE[LFO]:NEEDS[B9PartSwitch]:LAST[zzzOrbitaKerbalism] {
	wetMass = #$RESOURCE[LiquidFuel]/unitsPerVolume$
	@wetMass += #$RESOURCE[Oxidizer]/unitsPerVolume$
	@wetMass *= #$@RESOURCE_DEFINITION[LiquidFuel]/density$
	@RESOURCE[LiquidFuel] {
		@name = Kerosene
		@unitsPerVolume = #$/wetMass$
		@unitsPerVolume *= 0.333333333
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Kerosene]/density$
	}
	@RESOURCE[Oxidizer] {
		@name = LqdOxygen
		@unitsPerVolume = #$/wetMass$
		@unitsPerVolume *= 0.666666667
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[LqdOxygen]/density$
	}
}

@B9_TANK_TYPE[MonoPropellant]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[MonoPropellant] {
		@name = Hydrazine
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[MonoPropellant]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Hydrazine]/density$
	}
}

// CryoTanks
@B9_TANK_TYPE[LH2O]:NEEDS[CryoTanks]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[Oxidizer] {
		@name = LqdOxygen
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[Oxidizer]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[LqdOxygen]/density$
	}
}

@B9_TANK_TYPE[LH2OCryo]:NEEDS[CryoTanks]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[Oxidizer] {
		@name = LqdOxygen
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[Oxidizer]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[LqdOxygen]/density$
	}
}

@B9_TANK_TYPE[OX]:NEEDS[CryoTanks]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[Oxidizer] {
		@name = LqdOxygen
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[Oxidizer]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[LqdOxygen]/density$
	}
}

@B9_TANK_TYPE[LF]:NEEDS[CryoTanks]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[LiquidFuel] {
		@name = Kerosene
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[LiquidFuel]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Kerosene]/density$
	}
}

@B9_TANK_TYPE[LFOX]:NEEDS[CryoTanks]:LAST[zzzOrbitaKerbalism] {
	wetMass = #$RESOURCE[LiquidFuel]/unitsPerVolume$
	@wetMass += #$RESOURCE[Oxidizer]/unitsPerVolume$
	@wetMass *= #$@RESOURCE_DEFINITION[LiquidFuel]/density$
	@RESOURCE[LiquidFuel] {
		@name = Kerosene
		@unitsPerVolume = #$/wetMass$
		@unitsPerVolume *= 0.333333333
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Kerosene]/density$
	}
	@RESOURCE[Oxidizer] {
		@name = LqdOxygen
		@unitsPerVolume = #$/wetMass$
		@unitsPerVolume *= 0.666666667
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[LqdOxygen]/density$
	}
}

@B9_TANK_TYPE[LMOx]:NEEDS[CryoTanks]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[Oxidizer] {
		@name = LqdOxygen
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[Oxidizer]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[LqdOxygen]/density$
	}
}

// NearFutureAeronautics
@B9_TANK_TYPE[SpaceplaneLFO]:NEEDS[NearFutureAeronautics]:LAST[zzzOrbitaKerbalism] {
	wetMass = #$RESOURCE[LiquidFuel]/unitsPerVolume$
	@wetMass += #$RESOURCE[Oxidizer]/unitsPerVolume$
	@wetMass *= #$@RESOURCE_DEFINITION[LiquidFuel]/density$
	@RESOURCE[LiquidFuel] {
		@name = Kerosene
		@unitsPerVolume = #$/wetMass$
		@unitsPerVolume *= 0.333333333
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Kerosene]/density$
	}
	@RESOURCE[Oxidizer] {
		@name = LqdOxygen
		@unitsPerVolume = #$/wetMass$
		@unitsPerVolume *= 0.666666667
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[LqdOxygen]/density$
	}
}

@B9_TANK_TYPE[SpaceplaneLF]:NEEDS[NearFutureAeronautics]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[LiquidFuel] {
		@name = Kerosene
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[LiquidFuel]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Kerosene]/density$
	}
}

// NearFutureConstruction
@B9_TANK_TYPE[MPEC]:NEEDS[NearFutureConstruction]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[MonoPropellant] {
		@name = Hydrazine
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[MonoPropellant]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Hydrazine]/density$
	}
}

// NearFutureExploration
@B9_TANK_TYPE[MP]:NEEDS[NearFutureExploration]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[MonoPropellant] {
		@name = Hydrazine
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[MonoPropellant]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Hydrazine]/density$
	}
}

// NearFutureSpacecraft
@B9_TANK_TYPE[Mk4Capsule]:NEEDS[NearFutureSpacecraft]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[MonoPropellant] {
		@name = Hydrazine
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[MonoPropellant]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Hydrazine]/density$
	}
}

@B9_TANK_TYPE[Mk4CapsuleShroud]:NEEDS[NearFutureSpacecraft]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[MonoPropellant] {
		@name = Hydrazine
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[MonoPropellant]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Hydrazine]/density$
	}
}

@B9_TANK_TYPE[Mk4CapsuleFuelledShroud]:NEEDS[NearFutureSpacecraft]:LAST[zzzOrbitaKerbalism] {
	@RESOURCE[MonoPropellant] {
		@name = Hydrazine
		@unitsPerVolume *= #$@RESOURCE_DEFINITION[MonoPropellant]/density$
		@unitsPerVolume /= #$@RESOURCE_DEFINITION[Hydrazine]/density$
	}
}


// Edit UI text and colors
// CryoTanks
@PART[*]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]]:NEEDS[CryoTanks]:LAST[zzzOrbitaKerbalism] {
	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LiquidFuel]] {
		@SUBTYPE[LiquidFuel] {
			@title = #LOC_CRP_Kerosene_DisplayName
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #BFA760
			secondaryColor = #BFA760
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LF/O]] {
		@SUBTYPE[LF/O] {
			@title = #OrbitaLoc_B9PS_kerolox_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #BFA760
			secondaryColor = #3399CC
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LH2]] {
		@SUBTYPE[LH2] {
			@title = #LOC_CRP_Hydrogen_DisplayName
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #99CCFF
			secondaryColor = #99CCFF
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LH2/O]] {
		@SUBTYPE[LH2/O] {
			@title = #OrbitaLoc_B9PS_hydrolox_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #99CCFF
			secondaryColor = #3399CC
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Methane]] {
		@SUBTYPE[Methane] {
			@title = #LOC_CRP_Methane_DisplayName
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #00BF8F
			secondaryColor = #00BF8F
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Methalox]] {
		@SUBTYPE[Methalox] {
			@title = #OrbitaLoc_B9PS_methalox_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #00BF8F
			secondaryColor = #3399CC
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Oxidizer]] {
		@SUBTYPE[Oxidizer] {
			@title = #LOC_CRP_LqdOxygen_DisplayName
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #3399CC
			secondaryColor = #3399CC
		}
	}
}

// NearFutureAeronautics
@PART[*]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitch]]]:NEEDS[NearFutureAeronautics]:LAST[zzzOrbitaKerbalism] {
	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Structural]] {
		@SUBTYPE[Structural] {
			@title = #OrbitaLoc_B9PS_structural_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #ffffff
			secondaryColor = #000000
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LF]] {
		@SUBTYPE[LF] {
			@title = #LOC_CRP_Kerosene_DisplayName
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #BFA760
			secondaryColor = #BFA760
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LF/O]] {
		@SUBTYPE[LF/O] {
			@title = #OrbitaLoc_B9PS_kerolox_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #BFA760
			secondaryColor = #3399CC
		}
	}
}

// NearFutureExploration
@PART[*]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[surfaceSwitch]]]:NEEDS[NearFutureExploration]:LAST[zzzOrbitaKerbalism] {
	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Gold]] {
		@SUBTYPE[Gold] {
			@title = #OrbitaLoc_B9PS_keroloxg_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #BFA760
			secondaryColor = #fccb0a
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Silver]] {
		@SUBTYPE[Silver] {
			@title = #OrbitaLoc_B9PS_keroloxs_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #BFA760
			secondaryColor = #cecece
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Metal]] {
		@SUBTYPE[Metal] {
			@title = #OrbitaLoc_B9PS_kerolox_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #BFA760
			secondaryColor = #999999
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[RCS]] {
		@SUBTYPE[RCS] {
			@title = #LOC_CRP_Hydrazine_DisplayName
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #ffffff
			secondaryColor = #999999
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Xenon]] {
		@SUBTYPE[Xenon] {
			@title = #OrbitaLoc_B9PS_xenon_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #d9b358
			secondaryColor = #999999
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Argon]] {
		@SUBTYPE[Argon] {
			@title = #OrbitaLoc_B9PS_argon_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #475e74
			secondaryColor = #999999
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Lithium]] {
		@SUBTYPE[Lithium] {
			@title = #LOC_CRP_Lithium_DisplayName
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #ab4032
			secondaryColor = #999999
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LH2]] {
		@SUBTYPE[LH2] {
			@title = #LOC_CRP_Hydrogen_DisplayName
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #99CCFF
			secondaryColor = #999999
		}
	}

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[LH2O]] {
		@SUBTYPE[LH2O] {
			@title = #OrbitaLoc_B9PS_hydrolox_title
			-descriptionSummary = dummy
			-descriptionDetail = dummy
			primaryColor = #99CCFF
			secondaryColor = #999999
		}
	}
}